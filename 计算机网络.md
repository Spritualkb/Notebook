# 计算机网络概述

**互联网（网络的网络）**

它的通信协议可以使任意的

![image-20220227105425867.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183144298-1439192516.gif)

## 因特网发展的三个阶段

\1.   **第一阶段美国军用计算机网络ARPANET('阿帕网')。数据集中式处理，数据处理和通信处理都是通过主机完成。**

 

\2.   **第二阶段建成了三级结构**

![image-20220323235625373.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183144787-718874020.gif)

**的互联网**

1983年，TCP/IP协议成为ARPARNET的标准网络协议，因此1983年被认为是Internet的诞生时间

1994年中国建立互联网

\3.   第三阶段：逐渐形成了多层次ISP结构的互联网

\4.   互联网服务提供者ISP(也被称为互联网提供商)

![image-20220323235658433.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183145219-902691542.gif)

## 边缘部分

 

\1.   处在因特网的边缘部分就是连接在因特网上的所有的主机。这些主机又被称为**端系统**。

 

\2.   '主机A和主机B进行通信'，实际上是指：“运行在主机A上的某个程序和运行在主机B上的另一个程序进行通信”。

 

\3.   在网络边缘的端系统中运行的程序之间的通信方式通常可划分为两大类：

**/\**客户机服务器方式（C\S方式）\**即Client/Server方式**

![image-20220325145625692.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183145689-1285485905.gif)

**对等方式（P2P方式），****即peer to peer方式**

![image-20220326095316160.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183146178-1958888667.gif)

## 核心部分

在网络核心部分起特殊作用的是**路由器**

### 三种交换方式：

#### 电路交换：

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183147153-1106712124.gif)

#### 分组交换：

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183147798-2045109849.gif)

#### 报文交换：

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183148190-514275635.gif)

#### 三种交换方式的对比：

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183148556-1978645927.gif)

## 网络的作用范围分类

\1.   广域网WAN

\2.   城域网MAN

\3.   局域网LAN

\4.   个人区域网PAN

## 按照网络的线路结构进行分类

### 星型

l 星型拓扑结构是目前局域网普遍采用的一种拓扑结构。

l 是以一个节点作为中心节点，其他节点直接与中心节点相连构成的网络。

l  

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183149040-654243264.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183149497-484762327.gif)

### 总线型

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183150079-1620014379.gif)

### 环形

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183150538-1557293522.gif)

### 网状型

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183150964-812038947.gif)

<img src="https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183151430-658154780.gif" alt="截图.png"  />

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183151952-304869853.gif)

 

## 计算机网络的性能指标

### 速率

l 计算机发送的信号是以二进制数字形式的

l 一个二进制数字就是一个bit（比特）

l 字节：Byte，1Byte=8bit

l  

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183152575-1312291888.gif)

l 速率连接在网络上的主机在数字信道上传送bit数据的速率，也称为比特率或数据率。

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183153998-561752759.gif)

l  

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183155258-1440120857.gif)

### 带宽

l 在计算机网络中，带宽用来表示网络中某通道传送数据的能力，因此网络带宽表示在单位时间内网络中的某信道所能通过的“最高数据率”

l 单位：b/s(kbs,Mb/s,Gb/s,Tb/s)

l 带宽的宽带是100兆：出口网速最高100Mb/s

### 吞吐量

l 吞吐量表示在单位时间内通过某个网络（或信道，接口）的数据量

l 吞吐量受网络的带宽或额定速率的限制

l 吞吐量和带宽的区别：带宽指的是最大的传输速率，而吞吐量指的是实际传输速率

### 时延

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183155788-1879741615.gif)

l 网络中的时延有以下几个不同的部分组成：

#### 发送时延

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183156220-73144893.gif)

#### 传播时延

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183156599-822724259.gif)

#### 处理时延

处理时延指的是主机或者路由器在收到分组信息时花费的时间。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183157070-907118322.gif)

#### 往返时延

l  RTT往返时间在计算机网络中它是一个重要的性能指标。**表示从发送端将数据发送到传输媒介开始，到发送端收到来自接收端的确认总共经历的时间（不包含发送时延）**

l RTT由三个部分决定：**链路的传播时间，末端系统的处理时间，路由器的缓存中的排队和处理时间**。其中前两个部分的值作为一个TCP连接相对固定，路由器的缓存中的排队和处理时间会随着网络拥塞程度的变化而变化。**所以RTT的变化在一定程度上反映了网络拥塞程度的变化**。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183157551-860142723.gif)

#### 利用率

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183158000-1156569799.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183158620-86672869.gif)

#### 丢包率

l 丢包率即分组丢失率，是指在一定时间范围内，传输过程中丢失的分组数量与总分组数量的比率。

l 分组丢失主要有两种情况：

\1.   分组在传输过程中出现误码，被结点丢弃

\2.   主机发送的分组在传输过程中出现了误码，当分组进入传输路径中结点交换机后，被结点交换机检测出误码。进而被丢弃。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183159108-678484529.gif)

# 计算机网络体系结构

## OSI体系结构

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183159699-853666342.gif)

## 具有五层协议的体系结构

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183200478-1835653983.gif)

### 应用层

l 应用层是体系结构中的最高层。

l  

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183200894-166693132.gif)

l **互联网中的应用层协议有：域名系统DNS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议等，应用层交互的数据单位称为报文。**

### 运输层

l  运输层的任务就是负责**向两台主机中进程之间的通信提供通用的数据传输服务**。

l 运输层主要使用一下两种协议：

#### 传输控制协议TCP：

提供面向连接的，可靠的数据传输服务

#### 用户数据报协议UDP：

提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）

l TCP和UDP协议都有固定的格式，数据在经过运输层时会根据所选择的运输协议在应用传递过来的数据基础上加上对应协议的头部。

#### 网络层

l 主要是实现两个网络系统之间的数据透明传送，具体包括路由选择，拥堵控制和网际互连等。

l 在发送数据是，网络层把传输产生的报文段或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫作**IP数据报**，简称为**数据报。**

l **数据在经过网络层时会加上IP协议的头部**

#### 数据链路层

l 数据链路层也简称为链路层。在两个相结点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

#### 物理层

l 利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。

l **物理层上所传输数据的单位是比特。**

![截图.png](photo/clip_image061.gif)

![截图.png](photo/clip_image063.gif)

## 物理层

l 物理层主要解决在各种传输媒体上传输比特0和1的问题，进而给数据链路层提供透明传输比特流的服务

l 由于传输媒体的种类太多（例如**同轴电缆，光纤，无线电波**等），物理连接方式也有很多例如**点对点连接，广播连接**等，因此物理层协议种类也比较多。但是物理层为了解决在各种传输媒体上传输比特0和1的问题，无论是那种物理层协议都需要满足一下四个任务：

![截图.png](photo/clip_image065.gif)

## 传输媒体

\1.   导引型传输媒体：电磁波被导引沿着固体媒体传播

l 同轴电缆

![截图.png](photo/clip_image067.gif)

l 双绞线

![截图.png](photo/clip_image069.gif)

![截图.png](photo/clip_image071.gif)

\2.   非导引型传输媒体：非导引型传输媒体是指自由空间

l 无线电波

l 微波

l 红外线

l 可见光

## 数据链路层

### 数据链路层概述

![截图.png](photo/clip_image073.gif)

![截图.png](photo/clip_image075.gif)

### 封装成帧

l 封装成帧是指数据链路层给上层交付的协议数据单元添加**帧头**和**帧尾**使之成为**帧。**

![截图.png](photo/clip_image077.gif)

#### 透明传输

![截图.png](photo/clip_image079.gif)

![截图.png](photo/clip_image081.gif)

 

![截图.png](photo/clip_image083.gif)

#### 差错效验

![截图.png](photo/clip_image085.gif)

#### 以太网

##### 以太网概述

l 以太网是一种计算机局域网技术。IEEE组织的IEEE 802.3标准制定了以太网的技术标准，它规定了包括物理层的连线，电子信号和介质访问层协议的内容。以太网是应用最普遍的局域网技术，取代了其他局域网技术如令牌环，FDDI和ARCNET。

l 以太网是一种有线系统，最初使用同轴电缆进行数据传输，后来发展到使用双绞线和光纤并延续至今。

![截图.png](photo/clip_image087.gif)

##### 以太网的两个标准

![截图.png](photo/clip_image089.gif)

![截图.png](photo/clip_image091.gif)

![截图.png](photo/clip_image093.gif)

##### 以太网的MAC层

![截图.png](photo/clip_image095.gif)

![截图.png](photo/clip_image097.gif)

![截图.png](photo/clip_image099.gif)

![截图.png](photo/clip_image101.gif)

![截图.png](photo/clip_image103.gif)

##### 以太网交换机

![截图.png](photo/clip_image105.gif)

![截图.png](photo/clip_image107.gif)

![截图.png](photo/clip_image109.gif)

![截图.png](photo/clip_image111.gif)

![截图.png](photo/clip_image113.gif)

![截图.png](photo/clip_image115.gif)

![截图.png](photo/clip_image117.gif)

![截图.png](photo/clip_image119.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183201301-174751465.gif)

##### 虚拟机局域网VLAN

1.广播域

使用一个或多个以太网交换机互连起来的交换式以太网，其所有站点都属于同一个广播域。随着交换式以太网规模的扩大，广播域相应扩大，从而形成一个巨大的广域网。

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183201796-1857291369.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183202285-509225261.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183202832-422406298.gif)

 

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183203370-787891773.gif)

##### 华为云eNSP VLAN实验

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183203901-1421254962.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183204568-757293236.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183205044-1453127436.gif)

![截图.png](photo/clip_image137.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183205683-322459601.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183206396-1977782896.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183206834-450666668.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183207381-2032744784.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183207872-924374169.gif)

### 网络层

#### 网络层概述

网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输。

实现网络层要实现一下主要问题：

l 网络层向运输层提供怎样的服务（“可靠传输”还是“不可靠传输”）

\1.   TCP/IP协议体系结构的网际层提供的是无连接的，不可靠的数据包服务

\2.   ATM，帧中继和X.25的网络层提供的是面向连接的，可靠的虚电路服务

 

 

l 网络层寻址问题

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183208264-780080918.gif)

l 路由选择问题：路由器根据路由表选择下一跳（下一个路由器或者网络接口）

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183208650-1982242075.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183209128-1641551258.gif)

#### IPV4地址概述

\1.   在因特网中，为了实现计算机之间的相互通信，通常需要为每台计算机分配一个IP地址。在互联网的发展过程中主要有两个版本的互联网协议，分别是IPV4和IPV6.

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183209769-1171628803.gif)

\2.   IPV4的IP地址就是给因特网上的每一台主机（或路由器）的每一个接口分配一个在全世界范围内唯一的32比特的标识符，地址总数为2^32个。

\3.   IPV6的IP地址采用128比特地址长度，地址总数为2^128个

\4.   IP地址有因特网名字和数字分配机构ICANN进行分配。我国用户可向亚太网络信息中心APNIC申请IP地址，需要缴费。

\5.   当下互联网中的绝大多数设备采用的是IPV4的IP地址

\6.   由于32比特的IPV4地址不方便阅读，记录以及输入等，因此IPV4地址采用点分十进制表示方法以方便用户使用，列如：192.168.1.100

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183210292-1864632364.gif)

\7.   八位无符号二进制整数转为十进制：二进制表示中从右至左分别表示低比特位和高比特位。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183210687-1036209642.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183211097-2079019181.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183211719-1016056961.gif)

#### IPV4地址的分类

\8.   IPV4的IP地址由网络号（指定主机所属的网络）和主机号（指定被寻址的子网中的某个节点）组成，IP地址可以分为A,B,C,D,E五类。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183212191-1083956548.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183212751-665379586.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183213300-419806559.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183213927-461747573.gif)

**A类地址的IP取值范围为1.0.0.1~126.255.255.254（凡是小于等于126网络号的都是A类）**

**B类地址的IP取值范围为128.0.0.1~191.255.255.254**

**C类地址的IP取值范围为192.0.0.1~223.255.255.254**

**要注意的是：最后的0.1的网络地址一般为网关不做IP地址**

 

#### 子网的划分

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183214377-227588234.gif)

\9.   子网掩码：

l 子网掩码是一个32位地址，又叫网络掩码、地址掩码，**它用来指明一个IP地址的那些位标识的是主机所在的子网，以及哪些位标识的是主机**。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码**将某个IP地址划分为网络地址和主机地址两部分。**

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183215057-602625864.gif)

#### IP协议

\1.   **用户数据**在网络层（网际层）中使用IP协议进行封装，然后交付给数据链路层。IP协议提供**不可靠无连接的数据报传输服务。**

\2.   使用IP协议封装的数据我们称之为**IP数据报**

\3.   IP数据报的首部：IP数据报的首部由32个比特（也就是4个字节）构成，每个小格子称为字段或者域

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183215756-415581717.gif)

l **版本：占4比特，表示IP协议的版本**

l **首部长度：占4比特，表示IP数据报收部的长度。该字段的取值以4字节为单位。最小十进制取值为15，表示IP数据报首部包含20字节固定部分和最大40字节可变部分**

l **区分服务：8比特，一般不使用**

l **总长度：占16比特，表示IP数据报的总长度（首部+数据载荷）。最大取值为十进制的65535，以字节为单位（实际使用中不会传输这么长的IP数据报）。**

l **标识、标志、片偏移：这三个字段共同用于IP数据报分片，以太网中数据链路层规定MTU的值为1500字节，如果某个IP数据报分片成多个小的数据报，在将每个小的数据吧封装成帧。**

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183216375-667298683.gif)

#### IP数据报的发送和转发过程

IP数据报的发送和转发过程包含两部分：主机发送IP数据报、路由器转发数据报。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183217031-1794153134.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183217642-719976095.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183218223-339966740.gif)

#### 路由表

##### 路由

**路由就是报文从源端到目的端的路径**。当报文从路由器到目的网段有多条路由可达时，路由器可以根据路由表中最佳路由进行转发。

##### 路由表

在计算机网络中，路由表是一个存储在路由器或者联网计算机中的电子表格（文件）或类数据库。路由表存储着着指向特定网络地址的路径。路由表建立的主要目标是为了实现路由协议和静态路由选择。路由表就相当于一张地图告诉数据该如何去往目的地。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183218749-1004381931.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183219759-1370959978.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183220138-761221839.gif)

##### 路由表的类型

路由表可以分为：静态路由和动态路由

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183220672-982836611.gif)

##### 路由表实验

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183221327-1165244925.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183221869-457162361.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183222334-2040839378.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183222823-993398955.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183223303-914425581.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183223761-675917889.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183224253-1107408867.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183224710-87059962.gif)

**路由器和路由表之间不用再设置一个路由表**

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183225147-1652915391.gif)

##### ARP高速缓存表

###### 地址解析协议ARP

l 通过前面的学习，我们知道：如果网络中的主机需要互相通信，那么源主机必须要知道目的主机的IP地址和MAC地址，因为数据链路层封装的MAC帧中需要封装目的地址和原地址。当已知目的主机的IP地址时，可以通过ARP协议获得目的主机低MAC地址。

l ARP请求报文封装在MAC帧中，目的地址为FF-FF-FF-FF，并且以广播的形式发送。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183225564-996445132.gif)

###### ARP高速缓存表

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183225997-1041895901.gif)

###### ARP欺骗

ARP欺骗是一种以**ARP地址解析协议为基础**的一种网络攻击方式。

 ARP欺骗的原理：利用ARP协议没有安全认证机制，攻击者发送假的ARP数据报包到网上，尤其是送到网关上。其目的是要让送至特定的IP地址的流量被错误送到攻击者所取代的地方。因此攻击者可将这些流量另行转送到真正的网关（被动式数据包嗅探,passive sniffing)或是篡改后再转送（中间人攻击）。

ARP欺骗分为两种：

l 主机型欺骗：攻击者型其他主机发送ARP响应包，攻击者在响应包中填入网关的IP地址和自己MAC地址，这样主机A应该发送给网关的数据报会被网关转发给主机B

l 网关型器欺骗：攻击者向网关发送ARP响应包，攻击者在响应包中填入被攻击主机的IP地址和自己MAC地址，这样网关接受到互联网中发给主机A的数据是也会转发给主机B

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183226501-1164320476.gif)

##### 特殊IP地址

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183226978-959979412.gif)

### 运输层

#### 运输层概述

计算机网络体系结构中的物理层、数据链路层以及网络层他们共同解决了将**主机到主机的通信**。两个主机进行通信实际上就是两个主机中的应用进程互相通信，应用进程之间的通信有称为**端到端的通信。**

当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时，只有位于**网络边缘的主机**的协议栈才有运输层，而网络核心部分的主机协议栈才有运输层，而网络核心部分中的路由器在转发分组是都只用到下三层的功能。**如何为运行在不同主机上的应用进程提供的通信服务是运输层的任务。**

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183227413-825818593.gif)

#### 端口号

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183227915-602161768.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183228402-1194758688.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183228858-2109299818.gif)

#### 传输协议TCP！！！！！！

传输控制协议TCP一种基于连接的可靠的稳定的无重复的传输协议。

\1.   TCP头部信息

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183229311-150847187.gif)

l 16位源端口号：发送主机中进程的端口号

l 16位目的端口号：接受主机中进程的端口号

l 32位序列号：每一个包中都包含序列号，序列号被系统初始化位某个随机值ISN。后续的TCP报文段中系号加上该报文段所携带数据的第一个字节在整个字节流中的偏移。列如，某个TCP报文段传送的数据是字节流中的第一个1025~2048字节，那么该报文段的序号值就是ISN+1025

l 32位确认号：目的主机返回确认号，是源主机知道某个或几个报文段已被接收

l 四位首部长度：由于TCP首部包含一个长度可变的选项部分，所以需要这么一个值来指定这个TCP报文段到底有多长

l URG标志：表示紧急指针是否有效

l ACK标志：表示确认号是否有效。我们称携带ACK标识的TCP报文段为确认报文段

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183229858-240674820.gif)

\2.   TCP运输连接的阶段

l 建立TCP连接

l 数据传输

l 释放TCP连接

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183234049-1852242714.gif)

**注意：三报文握手我们也称之为三次握手或者三路握手，四报文挥手我们也称之为四次挥手或者四路挥手**

\3.   **TCP连接的建立**

TCP连接的建立需要解决以下三个问题：

l 使TCP双方能够确知对方的存在

l 使TCP双方能够对运输实体资源（如缓存大小、连接表中的项目等）进行分配

###### 三次握手过程

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183234873-1252950224.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183235524-757635581.gif)

###### 四次挥手过程：TCP通过四次挥手来释放连接，数据通信结束后，TCP双方都可以释放连接

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183236055-1395000806.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183236569-1179732539.gif)

##### TCP可靠传输的实现

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183237105-1552638969.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183237782-770121137.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183238376-1039994771.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183238990-376309984.gif)

#### 用户数据报协议UDP

UDP是用户数据报协议

UDP是一种无连接的不可靠的传输协议（不需要进行三次握手和四次挥手）

UDP不提供数据报分组、组装和不能对数据报进行排序的缺点，也就是说，当报文发送之后，是无法得知其是否安全完整到达的，因此适合实时数据传输，列如“**IP****电话、网络视频会议**等实时应用。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183239658-342465926.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183240251-1140089858.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183240793-987433309.gif)

#### TCP和UDP的区别

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183241228-1154858210.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183241656-50174198.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183242213-995668971.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183242960-1780690786.gif)

### 应用层

#### 应用层概述

应用层是网络体系结构中的最上层，所有的网络应用程序和服务都工作在应用层

常见的网络应用程序：浏览器，手游，即时通信软件，网站的后台程序，网游的主程等

常见的网络服务：telnet、FTP、ssh等

#### 万维网

\1.   万维网概述

万维网并非某种特殊的计算机网络。它是一个大规模的、联机式的信息储藏所，是运行在因特网的一个分布式应用

挖内网利用网页之间的超链接将不通网站链接成一张逻辑上的信息网

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183243470-634985748.gif)

 

\2.   统一资源定位URL

当我们访问某个网页是，在浏览器的地址栏会出现一长串的字符，这一长串的字符我们称之为统一资源定位符URL

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183243919-1767523238.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183244365-846472075.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183244796-1493157082.gif)

#### HTTP协议

\1.   浏览器发送HTTP请求的过程

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183245264-1711470392.gif)

\2.   HTTP协议概述

超文本传输协议HTTP定义了浏览器怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。是处理客户端和服务端之间的通信

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183245632-2078009463.gif)

\3.   HTTP/1.0

HTTP/1.0采用非持续连接方式。在该方式下，每次浏览器要请求一个文件都要与服务器建立TCP连接，当收到响应后就立即关闭连接。每请求一个文档就要有两倍的RTT的开销。若一个网页上有很多引用对象

那么请求每一个对象都需要花费2RTT的时间。

为了减小时延，浏览器通常会建立多个并行的TCP连接同时请求多个对象。但是，这会大量占用万维网服务器的资源，特别是万维网服务器往往要同时服务于大量客户的请求，这会使其负担很重。

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183245984-864193725.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183246463-708579118.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183246868-941185478.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183247316-1166935526.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183247828-552488811.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183248282-586951723.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183248669-546353272.gif)

### wireshaark

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183249206-41072620.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183249672-1826421835.gif)

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183250167-460297436.gif)

#### wireshark过滤器

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183250658-1150332158.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183251122-222624971.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183251662-1449623559.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183252078-179316520.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183252694-1245684770.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183253142-922466190.gif)

#### 使用wireshark分析TCP三次握手

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183253488-78851671.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183253861-161487971.gif)

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183254377-1832548492.gif)

#### 使用wireshark分析TCP数据包

 

![截图.png](https://img2023.cnblogs.com/blog/2554043/202212/2554043-20221204183254827-1607750537.gif)

 
